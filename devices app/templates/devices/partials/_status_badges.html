{% load static %}

<!-- Device Status Badge Component -->
{% if badge_type == "status" %}
    {% if device.status == "AVAILABLE" %}
        <span class="badge status-badge status-available">
            <i class="bi bi-check-circle-fill me-1"></i>
            Available
        </span>
    {% elif device.status == "ASSIGNED" %}
        <span class="badge status-badge status-assigned">
            <i class="bi bi-person-fill me-1"></i>
            Assigned
        </span>
    {% elif device.status == "MAINTENANCE" %}
        <span class="badge status-badge status-maintenance">
            <i class="bi bi-tools me-1"></i>
            Maintenance
        </span>
    {% elif device.status == "RETIRED" %}
        <span class="badge status-badge status-retired">
            <i class="bi bi-archive-fill me-1"></i>
            Retired
        </span>
    {% elif device.status == "LOST" %}
        <span class="badge status-badge status-lost">
            <i class="bi bi-exclamation-triangle-fill me-1"></i>
            Lost
        </span>
    {% elif device.status == "DAMAGED" %}
        <span class="badge status-badge status-damaged">
            <i class="bi bi-x-octagon-fill me-1"></i>
            Damaged
        </span>
    {% else %}
        <span class="badge status-badge status-unknown">
            <i class="bi bi-question-circle-fill me-1"></i>
            Unknown
        </span>
    {% endif %}

<!-- Device Condition Badge Component -->
{% elif badge_type == "condition" %}
    {% if device.condition == "NEW" %}
        <span class="badge condition-badge condition-new">
            <i class="bi bi-star-fill me-1"></i>
            New
        </span>
    {% elif device.condition == "EXCELLENT" %}
        <span class="badge condition-badge condition-excellent">
            <i class="bi bi-gem me-1"></i>
            Excellent
        </span>
    {% elif device.condition == "GOOD" %}
        <span class="badge condition-badge condition-good">
            <i class="bi bi-shield-check me-1"></i>
            Good
        </span>
    {% elif device.condition == "FAIR" %}
        <span class="badge condition-badge condition-fair">
            <i class="bi bi-shield me-1"></i>
            Fair
        </span>
    {% elif device.condition == "POOR" %}
        <span class="badge condition-badge condition-poor">
            <i class="bi bi-shield-x me-1"></i>
            Poor
        </span>
    {% elif device.condition == "DAMAGED" %}
        <span class="badge condition-badge condition-damaged">
            <i class="bi bi-exclamation-octagon-fill me-1"></i>
            Damaged
        </span>
    {% else %}
        <span class="badge condition-badge condition-unknown">
            <i class="bi bi-question-circle me-1"></i>
            Unknown
        </span>
    {% endif %}

<!-- Device Type Badge Component -->
{% elif badge_type == "type" %}
    {% if device.device_type == "COMPLETE" %}
        <span class="badge type-badge type-complete">
            <i class="bi bi-laptop me-1"></i>
            Complete Device
        </span>
    {% elif device.device_type == "COMPONENT" %}
        <span class="badge type-badge type-component">
            <i class="bi bi-cpu me-1"></i>
            Component
        </span>
    {% elif device.device_type == "ACCESSORY" %}
        <span class="badge type-badge type-accessory">
            <i class="bi bi-mouse me-1"></i>
            Accessory
        </span>
    {% else %}
        <span class="badge type-badge type-unknown">
            <i class="bi bi-question-square me-1"></i>
            Unknown
        </span>
    {% endif %}

<!-- Assignability Badge Component -->
{% elif badge_type == "assignable" %}
    {% if device.is_assignable %}
        <span class="badge assignable-badge assignable-yes">
            <i class="bi bi-check2-circle me-1"></i>
            Assignable
        </span>
    {% else %}
        <span class="badge assignable-badge assignable-no">
            <i class="bi bi-x-circle me-1"></i>
            Non-assignable
        </span>
    {% endif %}

<!-- Warranty Status Badge Component -->
{% elif badge_type == "warranty" %}
    {% if device.has_active_warranty %}
        {% if device.warranty_expires_soon %}
            <span class="badge warranty-badge warranty-expires-soon">
                <i class="bi bi-clock-fill me-1"></i>
                Expires Soon
            </span>
        {% else %}
            <span class="badge warranty-badge warranty-active">
                <i class="bi bi-shield-check me-1"></i>
                Under Warranty
            </span>
        {% endif %}
    {% elif device.has_expired_warranty %}
        <span class="badge warranty-badge warranty-expired">
            <i class="bi bi-shield-x me-1"></i>
            Warranty Expired
        </span>
    {% else %}
        <span class="badge warranty-badge warranty-none">
            <i class="bi bi-shield-slash me-1"></i>
            No Warranty
        </span>
    {% endif %}

<!-- Priority Badge Component -->
{% elif badge_type == "priority" %}
    {% if device.priority == "HIGH" %}
        <span class="badge priority-badge priority-high">
            <i class="bi bi-arrow-up-circle-fill me-1"></i>
            High Priority
        </span>
    {% elif device.priority == "MEDIUM" %}
        <span class="badge priority-badge priority-medium">
            <i class="bi bi-dash-circle-fill me-1"></i>
            Medium Priority
        </span>
    {% elif device.priority == "LOW" %}
        <span class="badge priority-badge priority-low">
            <i class="bi bi-arrow-down-circle-fill me-1"></i>
            Low Priority
        </span>
    {% else %}
        <span class="badge priority-badge priority-normal">
            <i class="bi bi-circle-fill me-1"></i>
            Normal
        </span>
    {% endif %}

<!-- Activity Badge Component -->
{% elif badge_type == "activity" %}
    {% if device.last_activity_days <= 7 %}
        <span class="badge activity-badge activity-recent">
            <i class="bi bi-lightning-fill me-1"></i>
            Recently Active
        </span>
    {% elif device.last_activity_days <= 30 %}
        <span class="badge activity-badge activity-moderate">
            <i class="bi bi-clock me-1"></i>
            Active
        </span>
    {% elif device.last_activity_days <= 90 %}
        <span class="badge activity-badge activity-low">
            <i class="bi bi-moon me-1"></i>
            Low Activity
        </span>
    {% else %}
        <span class="badge activity-badge activity-inactive">
            <i class="bi bi-pause-circle me-1"></i>
            Inactive
        </span>
    {% endif %}

<!-- QR Code Status Badge Component -->
{% elif badge_type == "qr" %}
    {% if device.qrcode_set.exists %}
        <span class="badge qr-badge qr-available">
            <i class="bi bi-qr-code me-1"></i>
            QR Available
        </span>
    {% else %}
        <span class="badge qr-badge qr-missing">
            <i class="bi bi-qr-code-scan me-1"></i>
            No QR Code
        </span>
    {% endif %}

<!-- Combined Status Group -->
{% elif badge_type == "status_group" %}
    <div class="status-badge-group">
        {% include 'devices/partials/_status_badges.html' with badge_type="status" device=device %}
        {% if show_condition %}
            {% include 'devices/partials/_status_badges.html' with badge_type="condition" device=device %}
        {% endif %}
        {% if show_warranty %}
            {% include 'devices/partials/_status_badges.html' with badge_type="warranty" device=device %}
        {% endif %}
    </div>

<!-- Compact Status Display -->
{% elif badge_type == "compact" %}
    <div class="compact-status-display">
        <div class="status-indicator status-{{ device.status|lower }}"></div>
        <span class="status-text">{{ device.get_status_display }}</span>
        {% if device.condition %}
            <small class="condition-text text-muted">| {{ device.get_condition_display }}</small>
        {% endif %}
    </div>

{% endif %}

<style>
/* Status Badges Base Styles */
.status-badge, .condition-badge, .type-badge, .assignable-badge, 
.warranty-badge, .priority-badge, .activity-badge, .qr-badge {
    font-size: 0.875rem;
    font-weight: 600;
    padding: 0.5rem 0.75rem;
    border-radius: 12px;
    border: 2px solid transparent;
    backdrop-filter: blur(4px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    white-space: nowrap;
}

.status-badge:hover, .condition-badge:hover, .type-badge:hover,
.assignable-badge:hover, .warranty-badge:hover, .priority-badge:hover,
.activity-badge:hover, .qr-badge:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* Status Badge Variants */
.status-available {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    border-color: #10b981;
}

.status-assigned {
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    color: white;
    border-color: #3b82f6;
}

.status-maintenance {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    color: white;
    border-color: #f59e0b;
}

.status-retired {
    background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
    color: white;
    border-color: #6b7280;
}

.status-lost {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: white;
    border-color: #ef4444;
}

.status-damaged {
    background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
    color: white;
    border-color: #dc2626;
}

.status-unknown {
    background: linear-gradient(135deg, #9ca3af 0%, #6b7280 100%);
    color: white;
    border-color: #9ca3af;
}

/* Condition Badge Variants */
.condition-new {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    border-color: #10b981;
}

.condition-excellent {
    background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
    color: white;
    border-color: #8b5cf6;
}

.condition-good {
    background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
    color: white;
    border-color: #06b6d4;
}

.condition-fair {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    color: white;
    border-color: #f59e0b;
}

.condition-poor {
    background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
    color: white;
    border-color: #f97316;
}

.condition-damaged {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: white;
    border-color: #ef4444;
}

.condition-unknown {
    background: linear-gradient(135deg, #9ca3af 0%, #6b7280 100%);
    color: white;
    border-color: #9ca3af;
}

/* Type Badge Variants */
.type-complete {
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    color: white;
    border-color: #3b82f6;
}

.type-component {
    background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
    color: white;
    border-color: #06b6d4;
}

.type-accessory {
    background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
    color: white;
    border-color: #6b7280;
}

.type-unknown {
    background: linear-gradient(135deg, #9ca3af 0%, #6b7280 100%);
    color: white;
    border-color: #9ca3af;
}

/* Assignability Badge Variants */
.assignable-yes {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    border-color: #10b981;
}

.assignable-no {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: white;
    border-color: #ef4444;
}

/* Warranty Badge Variants */
.warranty-active {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    border-color: #10b981;
}

.warranty-expires-soon {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    color: white;
    border-color: #f59e0b;
}

.warranty-expired {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: white;
    border-color: #ef4444;
}

.warranty-none {
    background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
    color: white;
    border-color: #6b7280;
}

/* Priority Badge Variants */
.priority-high {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: white;
    border-color: #ef4444;
}

.priority-medium {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    color: white;
    border-color: #f59e0b;
}

.priority-low {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    border-color: #10b981;
}

.priority-normal {
    background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
    color: white;
    border-color: #6b7280;
}

/* Activity Badge Variants */
.activity-recent {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    border-color: #10b981;
}

.activity-moderate {
    background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
    color: white;
    border-color: #06b6d4;
}

.activity-low {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    color: white;
    border-color: #f59e0b;
}

.activity-inactive {
    background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
    color: white;
    border-color: #6b7280;
}

/* QR Code Badge Variants */
.qr-available {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    border-color: #10b981;
}

.qr-missing {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    color: white;
    border-color: #f59e0b;
}

/* Status Badge Group */
.status-badge-group {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    align-items: center;
}

/* Compact Status Display */
.compact-status-display {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.status-indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    flex-shrink: 0;
}

.status-indicator.status-available { background-color: #10b981; }
.status-indicator.status-assigned { background-color: #3b82f6; }
.status-indicator.status-maintenance { background-color: #f59e0b; }
.status-indicator.status-retired { background-color: #6b7280; }
.status-indicator.status-lost { background-color: #ef4444; }
.status-indicator.status-damaged { background-color: #dc2626; }

.status-text {
    font-weight: 500;
    font-size: 0.875rem;
}

.condition-text {
    font-size: 0.75rem;
}

/* Responsive Design */
@media (max-width: 768px) {
    .status-badge, .condition-badge, .type-badge, .assignable-badge,
    .warranty-badge, .priority-badge, .activity-badge, .qr-badge {
        font-size: 0.75rem;
        padding: 0.375rem 0.5rem;
    }
    
    .status-badge-group {
        gap: 0.25rem;
    }
    
    .compact-status-display {
        gap: 0.375rem;
    }
}

/* Animation for dynamic updates */
@keyframes badgeUpdate {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.badge-update-animation {
    animation: badgeUpdate 0.3s ease-in-out;
}
</style>